const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DownloadItem-DkNTKPFZ.js","./chunk-vue-BbI9mUrH.js","./chunk-vendor-V0MkM0Yy.js","./chunk-vendor-f3sFGprf.css","./chunk-vuetify-Q_wEoaVW.js","./chunk-vuetify-CEZSyoxr.css","./DownloadItem-DyLimtOF.css"])))=>i.map(i=>d[i]);
import{h as e}from"./chunk-vendor-V0MkM0Yy.js";import{f as t,b as n,l as r,e as a,a3 as o,a4 as s,a5 as l,a6 as c,A as i,E as u,a7 as d,X as f,u as h,a8 as m,F as p,a9 as v,aa as y,ab as w}from"./chunk-vue-BbI9mUrH.js";import{c as g,d as k,a as E}from"./chunk-vuetify-Q_wEoaVW.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const _={},b=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),s=o?.nonce||o?.getAttribute("nonce");r=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in _)return;_[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(n)for(let n=a.length-1;n>=0;n--){const r=a[n];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script"),o.crossOrigin="",o.href=e,s&&o.setAttribute("nonce",s),document.head.appendChild(o),t?new Promise((t,n)=>{o.addEventListener("load",t),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},$=e("",{fetch:async(e,t)=>{const n=new Request(e,t),r=new Headers(n.headers),a="undefined"!=typeof window?localStorage.getItem("token"):null;a&&r.set("Authorization",`Bearer ${a}`);const o=await fetch(new Request(n,{headers:r}));return 401===o.status&&console.warn("Unauthorized: 401"),o}}),P=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n},C=P(t({__name:"App",setup(e){const t=y(()=>b(()=>import("./DownloadItem-DkNTKPFZ.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),w=n([]),g=n(!0),k=n(null),E=()=>{if("undefined"==typeof window)return;const e=document.getElementById("announce-area");e?.scrollIntoView({behavior:"smooth",block:"start"})},_=e=>{k.value=e,E()},P=()=>{k.value=null},C=(e,t)=>a(()=>{const n=new Set;for(const{path:r}of e.value){if(!r.startsWith(t))continue;const e=r.slice(t.length),a=e.indexOf("/"),o=-1===a?e:e.slice(0,a);o&&n.add(o)}return[...n].sort((e,t)=>e.localeCompare(t)).map(e=>({name:e,path:`${t}${e}`}))});r(async()=>{console.log("onMounted() called"),g.value=!0;await(async()=>{try{const e=await $.health.$get();if(!e.ok){const t=await e.text().catch(()=>"");throw new Error(`HTTP ${e.status}${t?`: ${t}`:""}`)}const t=await e.json().catch(()=>null);if(!t||"ok"!==t.status)throw new Error("APIが正常ではありません");return!0}catch(e){const t=e instanceof Error?e.message:"APIヘルスチェックに失敗しました";return console.error(e),k.value=t,E(),!1}})()?await(async()=>{try{const e=await $.tree.$get();if(!e.ok){const t=await e.text().catch(()=>"");throw new Error(`HTTP ${e.status}${t?`: ${t}`:""}`)}const t=await e.json();if(!t?.success||!t.data)throw new Error("ツリーが読み込めませんでした");w.value=t.data}catch(e){const t=e instanceof Error?e.message:"不明なエラーが発生しました";console.error(e),k.value=t,E()}finally{g.value=!1}})():g.value=!1,console.log("onMounted() finished")});const x=C(w,"DCSWorld/Mods/aircraft/"),A=C(w,"DCSWorld/Mods/campaigns/");return(e,n)=>{const r=o("v-divider"),a=o("v-alert"),y=o("v-container"),w=o("v-list-item"),E=o("v-list");return l(),s(y,{class:"pt-10",id:"app-wrapper"},{default:c(()=>[n[3]||(n[3]=i("h1",{class:"text-h1 text-center"},"DCS Transition Japanese",-1)),u(r),u(y,{id:"announce-area"},{default:c(()=>[g.value?(l(),s(a,{key:0,type:"info",variant:"tonal"},{default:c(()=>[...n[0]||(n[0]=[f("読み込み中です...",-1)])]),_:1})):d("",!0),k.value?(l(),s(a,{key:1,class:"my-4",type:"error",variant:"tonal",text:k.value,closable:"","onClick:close":P},null,8,["text"])):d("",!0)]),_:1}),h(x).length>0?(l(),s(y,{key:0},{default:c(()=>[n[1]||(n[1]=i("h2",{class:"text-h2 mt-10 mb-5"},"Aircrafts",-1)),u(E,null,{default:c(()=>[(l(!0),m(p,null,v(h(x),e=>(l(),s(w,{key:e.name},{default:c(()=>[u(h(t),{path:e.path,title:e.name,onError:_},null,8,["path","title"])]),_:2},1024))),128))]),_:1})]),_:1})):d("",!0),h(A).length>0?(l(),s(y,{key:1},{default:c(()=>[n[2]||(n[2]=i("h2",{class:"text-h2 mt-10 mb-5"},"DLC Campaigns",-1)),u(E,null,{default:c(()=>[(l(!0),m(p,null,v(h(A),e=>(l(),s(w,{key:e.name},{default:c(()=>[u(h(t),{path:e.path,title:e.name,onError:_},null,8,["path","title"])]),_:2},1024))),128))]),_:1})]),_:1})):d("",!0)]),_:1})}}}),[["__scopeId","data-v-5984ff97"]]),x=g({components:E,directives:k,ssr:!0,theme:{themes:{light:{colors:{primary:"#1867C0",secondary:"#5CBBF6",background:"#ececec"}}}}});const A=w(C);A.use(x),A.mount("#app");export{b as _,$ as a,P as b};
