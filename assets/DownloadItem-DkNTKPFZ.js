const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Button-Cx2o-znl.js","./chunk-vue-BbI9mUrH.js"])))=>i.map(i=>d[i]);
import{_ as a,a as t,b as e}from"./index-D6ql8OIA.js";import{f as s,aa as o,b as r,a3 as n,a4 as i,a5 as c,a6 as l,A as d,E as p,S as u}from"./chunk-vue-BbI9mUrH.js";import"./chunk-vendor-V0MkM0Yy.js";import"./chunk-vuetify-Q_wEoaVW.js";const m={class:"text-area",style:{"min-width":"0"}},b={class:"d-print-block"},f={class:"ml-1",id:"button-wrapper"},v=e(s({components:{Button:o(()=>a(()=>import("./Button-Cx2o-znl.js"),__vite__mapDeps([0,1]),import.meta.url))},__name:"DownloadItem",props:{title:{},path:{}},emits:["error"],setup(a,{emit:e}){const s=a,o=e,v=r(!0),w=async()=>{v.value=!1;try{const a=await(async a=>{const e=await t["download-zip"].$post({json:{path:a}});if(!e.ok||e.status>=400){const a=e.statusText||"不明な理由";throw new Error(`ダウンロードに失敗しました。しばらく待ってからもう一度お試しください。（HTTP ${e.status}: ${a}）`)}const s=await e.json(),o=s.data;if(!s.success||!o){const a=s.message??"ファイルを取得できませんでした。";throw new Error(a)}const r=Uint8Array.from(atob(o.base64),a=>a.charCodeAt(0));return new Blob([r],{type:"application/zip"})})(s.path),e=URL.createObjectURL(a),o=document.createElement("a");o.href=e,o.download=`${s.title}.zip`,document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(e)}catch(a){console.error(a);const t=a instanceof Error?a.message:"不明なエラーが発生しました";o("error",t)}finally{v.value=!0}};return(a,t)=>{const e=n("v-spacer"),o=n("Button"),r=n("v-container");return c(),i(r,{class:"d-flex align-center rounded",id:"wrapper"},{default:l(()=>[d("div",m,[d("p",b,u(s.title),1)]),p(e),d("div",f,[p(o,{label:"DL",size:"small",disabled:!v.value,loading:!v.value,onClick:w},null,8,["disabled","loading"])])]),_:1})}}}),[["__scopeId","data-v-e4fe9ba5"]]);export{v as default};
